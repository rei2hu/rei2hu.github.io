
<!DOCTYPE html>
<html>
<head>
<meta charset=UTF-8>
<meta content="width=device-width,initial-scale=1" name=viewport>
<link href=/style/style.css rel=stylesheet>
<link href=/style/a11y.css rel=stylesheet>
<link href=/favicon.svg rel=icon type=image/svg+xml>
<script src=/scripts/image_loader.js></script>
<script src=/scripts/tex-mml-chtml.js defer></script>
<script>window.MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0}}</script>
<title>points within a circle</title>
</head>
<body>
<nav class=site-nav id=nav>
<a href=/ >home</a>
<a href=/posts>posts</a>
<div id=lights-container>
<label title="toggle light/dark mode. only persistent with javascript">
<input id=lights type=checkbox>
lights
<script src=/scripts/lights.js></script>
</label>
</div>
</nav>
<div class=template-body>
<noscript class=noscript-warning>
Javascript is necessary for displaying LaTeX, some demos that run algorithms directly on the page, and small cosmetic features like light/dark mode.
</noscript>
<nav class=posts-nav_top>
<div class=posts-nav_before><a href=/./posts/138>&lt; personal yearly reflection 6</a></div>
</nav>
<h1 id=points-within-a-circle>points within a circle</h1>
<p>While I was browsing through various job offerings, I noticed a comment on one that, I assume, was an attempt to give candidates an edge by sharing a coding interview question ahead of time. It looked straightforward yet interesting, so I ended up thinking about it for a few minutes in bed before sleeping.</p>
<p>The gist of the question is:</p>
<p>You're given a set of points <code>(id1, x, y)</code> located at $(x, y)$ and queries
<code>(id2, x, y, r)</code> representing circles centered on $(x, y)$ with radius $r$. Figure out which points should be returned for each query.</p>
<p>
</p><div class=tikz-picture style=height:284.92743pt>
<svg height=284.92743pt viewBox="-72 -72 284.92743 284.92743" width=284.92743pt><g transform="translate(-72.07000732421874,212.45742797851557) scale(1,-1)"><g> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke-width=0.4pt> <g> <path d=" M  0.0 0.0 L  284.52744 0.0  " style=fill:none /> <path d=" M  0.0 0.0 L  0.0 284.52744  " style=fill:none /> <path d=" M  142.26372 142.26372 M  213.39557 142.26372 C  213.39557 181.54926 181.54926 213.39557 142.26372 213.39557 C  102.97818 213.39557 71.13187 181.54926 71.13187 142.26372 C  71.13187 102.97818 102.97818 71.13187 142.26372 71.13187 C  181.54926 71.13187 213.39557 102.97818 213.39557 142.26372 Z M  142.26372 142.26372  " style=fill:none /> <path d=" M  142.26372 142.26372 L  142.26372 213.39557  " style=fill:none /> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,145.79669,175.67686)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-72.07000732421874 y=212.45742797851557>r</text></g></g> </g> </g> </g> </g> <path d=" M  142.26372 142.26372 M  143.68643 142.26372 C  143.68643 143.04947 143.04947 143.68643 142.26372 143.68643 C  141.47797 143.68643 140.841 143.04947 140.841 142.26372 C  140.841 141.47797 141.47797 140.841 142.26372 140.841 C  143.04947 140.841 143.68643 141.47797 143.68643 142.26372 Z M  142.26372 142.26372  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,145.79669,131.23074)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-62.465820312499986 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-58.39207458496092 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.94766235351561 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-49.04484176635741 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.97109603881835 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> <path d=" M  85.35823 113.81097 M  86.78094 113.81097 C  86.78094 114.59673 86.14398 115.23369 85.35823 115.23369 C  84.57248 115.23369 83.93552 114.59673 83.93552 113.81097 C  83.93552 113.02522 84.57248 112.38826 85.35823 112.38826 C  86.14398 112.38826 86.78094 113.02522 86.78094 113.81097 Z M  85.35823 113.81097  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,88.8912,102.778)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-62.465820312499986 y=213.9574127197265>1</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-57.9796905517578 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.535278320312486 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-48.63245773315428 y=213.9574127197265>1</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.1463279724121 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> <path d=" M  199.1692 227.62195 M  200.59192 227.62195 C  200.59192 228.4077 199.95496 229.04466 199.1692 229.04466 C  198.38345 229.04466 197.74649 228.4077 197.74649 227.62195 C  197.74649 226.8362 198.38345 226.19923 199.1692 226.19923 C  199.95496 226.19923 200.59192 226.8362 200.59192 227.62195 Z M  199.1692 227.62195  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,202.70218,216.58897)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-62.465820312499986 y=213.9574127197265>2</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-57.9796905517578 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.535278320312486 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-48.63245773315428 y=213.9574127197265>2</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.1463279724121 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> <path d=" M  28.45274 170.71646 M  29.87546 170.71646 C  29.87546 171.50221 29.2385 172.13918 28.45274 172.13918 C  27.66699 172.13918 27.03003 171.50221 27.03003 170.71646 C  27.03003 169.93071 27.66699 169.29375 28.45274 169.29375 C  29.2385 169.29375 29.87546 169.93071 29.87546 170.71646 Z M  28.45274 170.71646  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,31.98572,159.68349)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-62.465820312499986 y=213.9574127197265>3</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-57.9796905517578 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.535278320312486 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-48.63245773315428 y=213.9574127197265>3</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.1463279724121 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> <path d=" M  199.1692 85.35823 M  200.59192 85.35823 C  200.59192 86.14398 199.95496 86.78094 199.1692 86.78094 C  198.38345 86.78094 197.74649 86.14398 197.74649 85.35823 C  197.74649 84.57248 198.38345 83.93552 199.1692 83.93552 C  199.95496 83.93552 200.59192 84.57248 200.59192 85.35823 Z M  199.1692 85.35823  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,202.70218,74.32526)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-62.465820312499986 y=213.9574127197265>4</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-57.9796905517578 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.535278320312486 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-48.63245773315428 y=213.9574127197265>4</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.1463279724121 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> </g> </g> </g> </g> </g> </g></svg>
</div>
<p></p>
<p>So I'll skip the "parse text into structured data" that you would probably have to write for this, and skip ambiguities in the problem like how the example weaved points and queries in the input and didn't specify if a query should return all points or just the points that came before it in an input, and go straight to various avenues of approach for the solution.</p>
<p>The first option is to do things the obvious way - when a query is made, filter through all the points looking for one where $\Delta x^2 + \Delta y^2 \lt r^2$ or something like that.</p>
<p>But if you have a lot of points, then that doesn't sound good. If the queries are repeated another simple optimization would be to cache the responses. The caching idea lead me to another one which was pre-calculating the solution of different areas and somehow figuring out which subareas make up a circle and combining them for the response. I do not know how to implement that if possible, though I think quad trees might provide guidance.</p>
<p>Going back to the issue of many points, I started thinking of ways to cut down the candidate list from everything to less than everything. I then thought that by ordering the data it might be possible to stop considering candidates when one is outside the query as the rest would also be too far. For example, on a 1d space using points and line (segments) instead of points and circles, if the points are (an ordered) $1, 3, 4, 5, 10,...$, and our line segment is centered around 4 with length 2 meaning it spans $[2, 6]$, then as we iterate through our ordered list, then once we see that $10$ is outside of $[2, 6]$, we no longer have to keep going. I did not think of how to order the points for this idea to apply to this problem, if possible.</p>
<p>
</p><div class=tikz-picture style=height:43.38583pt>
<svg height=43.38583pt viewBox="-72 -72 440.95712 43.38583" width=440.95712pt><g transform="translate(-66.43702697753905,-42.19454956054687) scale(1,-1)"><g> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke-width=0.4pt> <g> <path d=" M  0.0 0.0 L  426.79115 0.0  " style=fill:none /> <path d=" M  0.0 0.0 M  2.13387 0.0 C  2.13387 1.17851 1.17851 2.13387 0.0 2.13387 C  -1.17851 2.13387 -2.13387 1.17851 -2.13387 0.0 C  -2.13387 -1.17851 -1.17851 -2.13387 0.0 -2.13387 C  1.17851 -2.13387 2.13387 -1.17851 2.13387 0.0 Z M  0.0 0.0  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,-2.5,-9.9774)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-66.43702697753905,-42.19454956054687) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-66.43702697753905 y=-42.19454956054687>0</text></g></g> </g> </g> </g> </g> <path d=" M  28.45274 0.0 M  29.87546 0.0 C  29.87546 0.78575 29.2385 1.42271 28.45274 1.42271 C  27.66699 1.42271 27.03003 0.78575 27.03003 0.0 C  27.03003 -0.78575 27.66699 -1.42271 28.45274 -1.42271 C  29.2385 -1.42271 29.87546 -0.78575 29.87546 0.0 Z M  28.45274 0.0  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,25.95274,-9.9774)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-66.43702697753905,-42.19454956054687) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-66.43702697753905 y=-42.19454956054687>1</text></g></g> </g> </g> </g> </g> <g> <g stroke=rgb(100.0%,0.0%,0.0%)> <g fill=rgb(100.0%,0.0%,0.0%)> <path d=" M  85.35823 0.0 M  86.78094 0.0 C  86.78094 0.78575 86.14398 1.42271 85.35823 1.42271 C  84.57248 1.42271 83.93552 0.78575 83.93552 0.0 C  83.93552 -0.78575 84.57248 -1.42271 85.35823 -1.42271 C  86.14398 -1.42271 86.78094 -0.78575 86.78094 0.0 Z M  85.35823 0.0  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,82.85823,-9.9774)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-66.43702697753905,-42.19454956054687) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-66.43702697753905 y=-42.19454956054687>3</text></g></g> </g> </g> </g> </g> </g> </g> </g> <g> <g stroke=rgb(100.0%,0.0%,0.0%)> <g fill=rgb(100.0%,0.0%,0.0%)> <path d=" M  113.81097 0.0 M  115.23369 0.0 C  115.23369 0.78575 114.59673 1.42271 113.81097 1.42271 C  113.02522 1.42271 112.38826 0.78575 112.38826 0.0 C  112.38826 -0.78575 113.02522 -1.42271 113.81097 -1.42271 C  114.59673 -1.42271 115.23369 -0.78575 115.23369 0.0 Z M  113.81097 0.0  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,111.31097,-9.9774)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-66.43702697753905,-42.19454956054687) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-66.43702697753905 y=-42.19454956054687>4</text></g></g> </g> </g> </g> </g> </g> </g> </g> <g> <g stroke=rgb(100.0%,0.0%,0.0%)> <g fill=rgb(100.0%,0.0%,0.0%)> <path d=" M  142.26372 0.0 M  143.68643 0.0 C  143.68643 0.78575 143.04947 1.42271 142.26372 1.42271 C  141.47797 1.42271 140.841 0.78575 140.841 0.0 C  140.841 -0.78575 141.47797 -1.42271 142.26372 -1.42271 C  143.04947 -1.42271 143.68643 -0.78575 143.68643 0.0 Z M  142.26372 0.0  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,139.76372,-9.9774)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-66.43702697753905,-42.19454956054687) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-66.43702697753905 y=-42.19454956054687>5</text></g></g> </g> </g> </g> </g> </g> </g> </g> <path d=" M  284.52744 0.0 M  285.95015 0.0 C  285.95015 0.78575 285.31319 1.42271 284.52744 1.42271 C  283.74168 1.42271 283.10472 0.78575 283.10472 0.0 C  283.10472 -0.78575 283.74168 -1.42271 284.52744 -1.42271 C  285.31319 -1.42271 285.95015 -0.78575 285.95015 0.0 Z M  284.52744 0.0  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,279.52742,-9.9774)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-66.43702697753905,-42.19454956054687) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-66.43702697753905 y=-42.19454956054687>10</text></g></g> </g> </g> </g> </g> <path d=" M  426.79115 0.0 M  428.92502 0.0 C  428.92502 1.17851 427.96967 2.13387 426.79115 2.13387 C  425.61264 2.13387 424.65729 1.17851 424.65729 0.0 C  424.65729 -1.17851 425.61264 -2.13387 426.79115 -2.13387 C  427.96967 -2.13387 428.92502 -1.17851 428.92502 0.0 Z M  426.79115 0.0  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,421.79114,-9.9774)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-66.43702697753905,-42.19454956054687) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-66.43702697753905 y=-42.19454956054687>15</text></g></g> </g> </g> </g> </g> <path d=" M  56.90549 28.45274 L  170.71646 28.45274  " style=fill:none /> <path d=" M  56.90549 28.45274 M  58.3282 28.45274 C  58.3282 29.2385 57.69124 29.87546 56.90549 29.87546 C  56.11974 29.87546 55.48277 29.2385 55.48277 28.45274 C  55.48277 27.66699 56.11974 27.03003 56.90549 27.03003 C  57.69124 27.03003 58.3282 27.66699 58.3282 28.45274 Z M  56.90549 28.45274  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,54.40549,18.47534)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-66.43702697753905,-42.19454956054687) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-66.43702697753905 y=-42.19454956054687>2</text></g></g> </g> </g> </g> </g> <path d=" M  170.71646 28.45274 M  172.13918 28.45274 C  172.13918 29.2385 171.50221 29.87546 170.71646 29.87546 C  169.93071 29.87546 169.29375 29.2385 169.29375 28.45274 C  169.29375 27.66699 169.93071 27.03003 170.71646 27.03003 C  171.50221 27.03003 172.13918 27.66699 172.13918 28.45274 Z M  170.71646 28.45274  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,168.21646,18.47534)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-66.43702697753905,-42.19454956054687) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-66.43702697753905 y=-42.19454956054687>6</text></g></g> </g> </g> </g> </g> </g> </g> </g> </g> </g> </g></svg>
</div>
<p></p>
<p>However, looking at the 1d idea, we can also use it to cut off earlier candidates, since we know it has to be at least 2. In fact, we know the entire solution is everything between $[2, 6]$ so if we grab that range from our ordered points then that's the solution. We can extend this to the 2d space in the problem by doing this for the x and y dimensions - for a query with radius $(x, y, r)$ we can look at ranges $[x - r, x + r]$ and $[y - r, y + r]$ and using the intersection of those members for candidates. Conceptually this is drawing a square that bounds the circle and only picking points within them where things that fall in the corners will be filtered out through the normal process. The ranges can be found efficiently using b trees or range trees.</p>
<p>(Unrelated: there seems to be an issue with tikzpicture generation where commas turn into semicolons and minus signs turn into upside down exclamation marks, so that's why some things may look weird)</p>
<p>
</p><div class=tikz-picture style=height:284.92743pt>
<svg height=284.92743pt viewBox="-72 -72 284.92743 284.92743" width=284.92743pt><g transform="translate(-72.07000732421874,212.45742797851557) scale(1,-1)"><g> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke-width=0.4pt> <g> <path d=" M  0.0 0.0 L  284.52744 0.0  " style=fill:none /> <path d=" M  0.0 0.0 L  0.0 284.52744  " style=fill:none /> <path d=" M  142.26372 142.26372 M  213.39557 142.26372 C  213.39557 181.54926 181.54926 213.39557 142.26372 213.39557 C  102.97818 213.39557 71.13187 181.54926 71.13187 142.26372 C  71.13187 102.97818 102.97818 71.13187 142.26372 71.13187 C  181.54926 71.13187 213.39557 102.97818 213.39557 142.26372 Z M  142.26372 142.26372  " style=fill:none /> <path d=" M  142.26372 142.26372 L  142.26372 213.39557  " style=fill:none /> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,145.79669,175.67686)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-72.07000732421874 y=212.45742797851557>r</text></g></g> </g> </g> </g> </g> <path d=" M  142.26372 142.26372 M  143.68643 142.26372 C  143.68643 143.04947 143.04947 143.68643 142.26372 143.68643 C  141.47797 143.68643 140.841 143.04947 140.841 142.26372 C  140.841 141.47797 141.47797 140.841 142.26372 140.841 C  143.04947 140.841 143.68643 141.47797 143.68643 142.26372 Z M  142.26372 142.26372  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,145.79669,131.23074)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-62.465820312499986 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-58.39207458496092 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.94766235351561 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-49.04484176635741 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.97109603881835 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> <path d=" M  85.35823 113.81097 M  86.78094 113.81097 C  86.78094 114.59673 86.14398 115.23369 85.35823 115.23369 C  84.57248 115.23369 83.93552 114.59673 83.93552 113.81097 C  83.93552 113.02522 84.57248 112.38826 85.35823 112.38826 C  86.14398 112.38826 86.78094 113.02522 86.78094 113.81097 Z M  85.35823 113.81097  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,88.8912,102.778)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-62.465820312499986 y=213.9574127197265>1</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-57.9796905517578 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.535278320312486 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-48.63245773315428 y=213.9574127197265>1</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.1463279724121 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> <path d=" M  199.1692 227.62195 M  200.59192 227.62195 C  200.59192 228.4077 199.95496 229.04466 199.1692 229.04466 C  198.38345 229.04466 197.74649 228.4077 197.74649 227.62195 C  197.74649 226.8362 198.38345 226.19923 199.1692 226.19923 C  199.95496 226.19923 200.59192 226.8362 200.59192 227.62195 Z M  199.1692 227.62195  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,163.82367,216.58897)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-62.465820312499986 y=213.9574127197265>2</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-57.9796905517578 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.535278320312486 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-48.63245773315428 y=213.9574127197265>2</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.1463279724121 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> <path d=" M  28.45274 170.71646 M  29.87546 170.71646 C  29.87546 171.50221 29.2385 172.13918 28.45274 172.13918 C  27.66699 172.13918 27.03003 171.50221 27.03003 170.71646 C  27.03003 169.93071 27.66699 169.29375 28.45274 169.29375 C  29.2385 169.29375 29.87546 169.93071 29.87546 170.71646 Z M  28.45274 170.71646  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,31.98572,159.68349)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-62.465820312499986 y=213.9574127197265>3</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-57.9796905517578 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.535278320312486 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-48.63245773315428 y=213.9574127197265>3</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.1463279724121 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> <path d=" M  199.1692 85.35823 M  200.59192 85.35823 C  200.59192 86.14398 199.95496 86.78094 199.1692 86.78094 C  198.38345 86.78094 197.74649 86.14398 197.74649 85.35823 C  197.74649 84.57248 198.38345 83.93552 199.1692 83.93552 C  199.95496 83.93552 200.59192 84.57248 200.59192 85.35823 Z M  199.1692 85.35823  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,163.82367,74.32526)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-62.465820312499986 y=213.9574127197265>4</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-57.9796905517578 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-53.535278320312486 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmr7 font-size=7 x=-48.63245773315428 y=213.9574127197265>4</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-44.1463279724121 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> <path d=" M  71.13185 0.0 L  71.13185 284.52744  " style=fill:none /> <path d=" M  213.39557 0.0 L  213.39557 284.52744  " style=fill:none /> <path d=" M  0.0 71.13185 L  284.52744 71.13185  " style=fill:none /> <path d=" M  0.0 213.39557 L  284.52744 213.39557  " style=fill:none /> <g> <g stroke=rgb(100.0%,0.0%,0.0%)> <g fill=rgb(100.0%,0.0%,0.0%)> <path d=" M  71.13185 71.13185 L  71.13185 213.39557 L  213.39557 213.39557 L  213.39557 71.13185 L  71.13185 71.13185  " style=fill:none /> </g> </g> </g> <g> <g stroke=rgb(100.0%,0.0%,0.0%)> <g fill=rgb(100.0%,0.0%,0.0%)> <path d=" M  71.13185 213.39557 M  73.26572 213.39557 C  73.26572 214.57408 72.31036 215.52943 71.13185 215.52943 C  69.95334 215.52943 68.99799 214.57408 68.99799 213.39557 C  68.99799 212.21706 69.95334 211.2617 71.13185 211.2617 C  72.31036 211.2617 73.26572 212.21706 73.26572 213.39557 Z M  71.13185 213.39557  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,3.14365,202.3626)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-62.465820312499986 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmsy10 font-size=10 x=-56.16990661621092 y=212.45742797851557>&#161;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-46.16993331909179 y=212.45742797851557>r</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-41.93610954284667 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-37.49169731140136 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-32.58887672424316 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-26.292963027954094 y=212.45742797851557>+</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-16.292989730834957 y=212.45742797851557>r</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-11.50360870361328 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> </g> </g> </g> <g> <g stroke=rgb(100.0%,0.0%,0.0%)> <g fill=rgb(100.0%,0.0%,0.0%)> <path d=" M  71.13185 71.13185 M  73.26572 71.13185 C  73.26572 72.31036 72.31036 73.26572 71.13185 73.26572 C  69.95334 73.26572 68.99799 72.31036 68.99799 71.13185 C  68.99799 69.95334 69.95334 68.99799 71.13185 68.99799 C  72.31036 68.99799 73.26572 69.95334 73.26572 71.13185 Z M  71.13185 71.13185  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,3.14365,60.09888)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-62.465820312499986 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmsy10 font-size=10 x=-56.16990661621092 y=212.45742797851557>&#161;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-46.16993331909179 y=212.45742797851557>r</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-41.93610954284667 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-37.49169731140136 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-32.58887672424316 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmsy10 font-size=10 x=-26.292963027954094 y=212.45742797851557>&#161;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-16.292989730834957 y=212.45742797851557>r</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-11.50360870361328 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> </g> </g> </g> <g> <g stroke=rgb(100.0%,0.0%,0.0%)> <g fill=rgb(100.0%,0.0%,0.0%)> <path d=" M  213.39557 213.39557 M  215.52943 213.39557 C  215.52943 214.57408 214.57408 215.52943 213.39557 215.52943 C  212.21706 215.52943 211.2617 214.57408 211.2617 213.39557 C  211.2617 212.21706 212.21706 211.2617 213.39557 211.2617 C  214.57408 211.2617 215.52943 212.21706 215.52943 213.39557 Z M  213.39557 213.39557  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,216.92854,202.3626)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-62.465820312499986 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-56.16990661621092 y=212.45742797851557>+</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-46.16993331909179 y=212.45742797851557>r</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-41.93610954284667 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-37.49169731140136 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-32.58887672424316 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-26.292963027954094 y=212.45742797851557>+</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-16.292989730834957 y=212.45742797851557>r</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-11.50360870361328 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> </g> </g> </g> <g> <g stroke=rgb(100.0%,0.0%,0.0%)> <g fill=rgb(100.0%,0.0%,0.0%)> <path d=" M  213.39557 71.13185 M  215.52943 71.13185 C  215.52943 72.31036 214.57408 73.26572 213.39557 73.26572 C  212.21706 73.26572 211.2617 72.31036 211.2617 71.13185 C  211.2617 69.95334 212.21706 68.99799 213.39557 68.99799 C  214.57408 68.99799 215.52943 69.95334 215.52943 71.13185 Z M  213.39557 71.13185  "/> <g> <g> <g transform=matrix(1.0,0.0,0.0,1.0,216.92854,60.09888)> <g stroke=rgb(0.0%,0.0%,0.0%)> <g fill=rgb(0.0%,0.0%,0.0%)> <g stroke=none transform="scale(-1,1) translate(-72.07000732421874,212.45742797851557) scale(-1,-1)"><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-72.07000732421874 y=212.45742797851557>(</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-68.18110466003417 y=212.45742797851557>x</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-62.465820312499986 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-56.16990661621092 y=212.45742797851557>+</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-46.16993331909179 y=212.45742797851557>r</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-41.93610954284667 y=212.45742797851557>;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-37.49169731140136 y=212.45742797851557>y</text><text alignment-baseline=baseline fill=black font-family=cmmi7 font-size=7 x=-32.58887672424316 y=213.9574127197265>c</text><text alignment-baseline=baseline fill=black font-family=cmsy10 font-size=10 x=-26.292963027954094 y=212.45742797851557>&#161;</text><text alignment-baseline=baseline fill=black font-family=cmmi10 font-size=10 x=-16.292989730834957 y=212.45742797851557>r</text><text alignment-baseline=baseline fill=black font-family=cmr10 font-size=10 x=-11.50360870361328 y=212.45742797851557>)</text></g></g> </g> </g> </g> </g> </g> </g> </g> </g> </g> </g> </g> </g> </g></svg>
</div>
<p></p>
<p>I liked this idea, and thought it was reasonable. The one final idea I considered for the ordering points approach was to use polar coordinates for the points, since they already contain the radius though from the origin. I also could not think of any way to apply this.</p>
<p>Like all interview questions, I'm always left with the question of whether this is the "official" solution or not. Fortunately, this appears to be a common interview question and various solutions are online, including bounding squares, bounding diamonds, and a k-d tree which I was unfamiliar withâ€¦ oh it's just another version of a tree that partitions space, so maybe it's the proper version of the quad tree solution.</p>
<nav class=posts-nav_bottom>
<div class=posts-nav_before><a href=/./posts/138>&lt; personal yearly reflection 6</a></div>
</nav>
<div class=commit-container>
<div class="commit-list de-emphasized">
<span>History:</span>
<details>
<summary>2025-12-05 - update post 139: add diagrams</summary>
<pre class=code-block><input id=code-block-bd5d11bead2457a4b986c18409fad1da0ce308d4-1 type=checkbox><label for=code-block-bd5d11bead2457a4b986c18409fad1da0ce308d4-1></label><code><span class=hljs-meta>@@ -13,2 +13,16 @@</span> Figure out which points should be returned for each query.

<span class=hljs-addition>+$$</span>
<span class=hljs-addition>+\begin{tikzpicture}</span>
<span class=hljs-addition>+  \draw (0, 0) -- (10, 0);</span>
<span class=hljs-addition>+  \draw (0, 0) -- (0, 10);</span>
<span class=hljs-addition>+  \draw (5, 5) circle (2.5);</span>
<span class=hljs-addition>+  \draw (5, 5) -- (5, 7.5) node[midway, right] (cr) {$r$};</span>
<span class=hljs-addition>+  \filldraw (5, 5) circle (0.05) node[below right] (cc) {$(x_c, y_c)$};</span>
<span class=hljs-addition>+  \filldraw (3, 4) circle (0.05) node[below right] (p1) {$(x_1, y_1)$};</span>
<span class=hljs-addition>+  \filldraw (7, 8) circle (0.05) node[below right] (p2) {$(x_2, y_2)$};</span>
<span class=hljs-addition>+  \filldraw (1, 6) circle (0.05) node[below right] (p3) {$(x_3, y_3)$};</span>
<span class=hljs-addition>+  \filldraw (7, 3) circle (0.05) node[below right] (p4) {$(x_4, y_4)$};</span>
<span class=hljs-addition>+\end{tikzpicture}</span>
<span class=hljs-addition>+$$</span>
<span class=hljs-addition>+</span>
 So I&#x27;ll skip the &quot;parse text into structured data&quot; that you would probably have
</code></pre>
<pre class=code-block><input id=code-block-bd5d11bead2457a4b986c18409fad1da0ce308d4-2 type=checkbox><label for=code-block-bd5d11bead2457a4b986c18409fad1da0ce308d4-2></label><code><span class=hljs-meta>@@ -35,7 +49,24 @@</span> one is outside the query as the rest would also be too far. For example, on a 1d
 space using points and line (segments) instead of points and circles, if the
<span class=hljs-deletion>-points are (an ordered) $-1, 3, 4, 5, 10, 100...$, and our line segment is</span>
<span class=hljs-deletion>-centered around 4 with length 2 meaning it spans $[2, 6]$, then as we iterate</span>
<span class=hljs-deletion>-through our ordered list, then once we see that $10$ is outside of $[2, 6]$, we</span>
<span class=hljs-deletion>-no longer have to keep going. I did not think of how to order the points for</span>
<span class=hljs-deletion>-this idea to apply to this problem, if possible.</span>
<span class=hljs-addition>+points are (an ordered) $1, 3, 4, 5, 10,...$, and our line segment is centered</span>
<span class=hljs-addition>+around 4 with length 2 meaning it spans $[2, 6]$, then as we iterate through our</span>
<span class=hljs-addition>+ordered list, then once we see that $10$ is outside of $[2, 6]$, we no longer</span>
<span class=hljs-addition>+have to keep going. I did not think of how to order the points for this idea to</span>
<span class=hljs-addition>+apply to this problem, if possible.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+$$</span>
<span class=hljs-addition>+\begin{tikzpicture}</span>
<span class=hljs-addition>+  \draw (0, 0) -- (15, 0);</span>
<span class=hljs-addition>+  \filldraw (0, 0) circle (0.075) node[below] (s) {$0$};</span>
<span class=hljs-addition>+  \filldraw (1, 0) circle (0.05) node[below] (p1) {$1$};</span>
<span class=hljs-addition>+  \filldraw[red] (3, 0) circle (0.05) node[below] (p2) {$3$};</span>
<span class=hljs-addition>+  \filldraw[red] (4, 0) circle (0.05) node[below] (p3) {$4$};</span>
<span class=hljs-addition>+  \filldraw[red] (5, 0) circle (0.05) node[below] (p4) {$5$};</span>
<span class=hljs-addition>+  \filldraw (10, 0) circle (0.05) node[below] (p5) {$10$};</span>
<span class=hljs-addition>+  \filldraw (15, 0) circle (0.075) node[below] (e) {$15$};</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+  \draw (2, 1) -- (6, 1);</span>
<span class=hljs-addition>+  \filldraw (2, 1) circle (0.05) node[below] (ls) {$2$};</span>
<span class=hljs-addition>+  \filldraw (6, 1) circle (0.05) node[below] (le) {$6$};</span>
<span class=hljs-addition>+\end{tikzpicture}</span>
<span class=hljs-addition>+$$</span>
</code></pre>
<pre class=code-block><input id=code-block-bd5d11bead2457a4b986c18409fad1da0ce308d4-3 type=checkbox><label for=code-block-bd5d11bead2457a4b986c18409fad1da0ce308d4-3></label><code><span class=hljs-meta>@@ -52,2 +83,32 @@</span> process. The ranges can be found efficiently using b trees or range trees.

<span class=hljs-addition>+(Unrelated: there seems to be an issue with tikzpicture generation where commas</span>
<span class=hljs-addition>+turn into semicolons and minus signs turn into upside down exclamation marks, so</span>
<span class=hljs-addition>+that&#x27;s why some things may look weird)</span>
<span class=hljs-addition>+&lt;!-- markdownlint-disable line-length --&gt;</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+$$</span>
<span class=hljs-addition>+\begin{tikzpicture}</span>
<span class=hljs-addition>+  \draw (0, 0) -- (10, 0);</span>
<span class=hljs-addition>+  \draw (0, 0) -- (0, 10);</span>
<span class=hljs-addition>+  \draw (5, 5) circle (2.5);</span>
<span class=hljs-addition>+  \draw (5, 5) -- (5, 7.5) node[midway, right ] (cr) {$r$};</span>
<span class=hljs-addition>+  \filldraw (5, 5) circle (0.05) node[below right] (cc) {$(x_c, y_c)$};</span>
<span class=hljs-addition>+  \filldraw (3, 4) circle (0.05) node[below right] (p1) {$(x_1, y_1)$};</span>
<span class=hljs-addition>+  \filldraw (7, 8) circle (0.05) node[below left] (p2) {$(x_2, y_2)$};</span>
<span class=hljs-addition>+  \filldraw (1, 6) circle (0.05) node[below right] (p3) {$(x_3, y_3)$};</span>
<span class=hljs-addition>+  \filldraw (7, 3) circle (0.05) node[below left] (p4) {$(x_4, y_4)$};</span>
<span class=hljs-addition>+  \draw (2.5, 0) -- (2.5, 10);</span>
<span class=hljs-addition>+  \draw (7.5, 0) -- (7.5, 10);</span>
<span class=hljs-addition>+  \draw (0, 2.5) -- (10, 2.5);</span>
<span class=hljs-addition>+  \draw (0, 7.5) -- (10, 7.5);</span>
<span class=hljs-addition>+  \draw[red] (2.5, 2.5) -- (2.5, 7.5) -- (7.5, 7.5) -- (7.5, 2.5) -- (2.5, 2.5);</span>
<span class=hljs-addition>+  \filldraw[red] (2.5, 7.5) circle (0.075) node[below left] (p4) {$(x_c - r, y_c + r)$};</span>
<span class=hljs-addition>+  \filldraw[red] (2.5, 2.5) circle (0.075) node[below left] (p4) {$(x_c - r, y_c - r)$};</span>
<span class=hljs-addition>+  \filldraw[red] (7.5, 7.5) circle (0.075) node[below right] (p4) {$(x_c + r, y_c + r)$};</span>
<span class=hljs-addition>+  \filldraw[red] (7.5, 2.5) circle (0.075) node[below right] (p4) {$(x_c + r, y_c - r)$};</span>
<span class=hljs-addition>+\end{tikzpicture}</span>
<span class=hljs-addition>+$$</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+&lt;!-- markdownlint-enable line-length --&gt;</span>
<span class=hljs-addition>+</span>
 I liked this idea, and thought it was reasonable. The one final idea I
</code></pre>
</details>
<details>
<summary>2025-12-05 - add post 139</summary>
<pre class=code-block><input id=code-block-2ecbf277430c4dcd84cc5ba9b37e89ea3647a298-1 type=checkbox><label for=code-block-2ecbf277430c4dcd84cc5ba9b37e89ea3647a298-1></label><code><span class=hljs-meta>@@ -0,0 +1,63 @@</span>
<span class=hljs-addition>+# points within a circle</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+While I was browsing through various job offerings, I noticed a comment on one</span>
<span class=hljs-addition>+that, I assume, was an attempt to give candidates an edge by sharing a coding</span>
<span class=hljs-addition>+interview question ahead of time. It looked straightforward yet interesting, so</span>
<span class=hljs-addition>+I ended up thinking about it for a few minutes in bed before sleeping.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+The gist of the question is:</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+You&#x27;re given a set of points `(id1, x, y)` located at $(x, y)$ and queries</span>
<span class=hljs-addition>+`(id2, x, y, r)` representing circles centered on $(x, y)$ with radius $r$.</span>
<span class=hljs-addition>+Figure out which points should be returned for each query.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+So I&#x27;ll skip the &quot;parse text into structured data&quot; that you would probably have</span>
<span class=hljs-addition>+to write for this, and skip ambiguities in the problem like how the example</span>
<span class=hljs-addition>+weaved points and queries in the input and didn&#x27;t specify if a query should</span>
<span class=hljs-addition>+return all points or just the points that came before it in an input, and go</span>
<span class=hljs-addition>+straight to various avenues of approach for the solution.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+The first option is to do things the obvious way - when a query is made, filter</span>
<span class=hljs-addition>+through all the points looking for one where $\Delta x^2 + \Delta y^2 \lt r^2$</span>
<span class=hljs-addition>+or something like that.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+But if you have a lot of points, then that doesn&#x27;t sound good. If the queries</span>
<span class=hljs-addition>+are repeated another simple optimization would be to cache the responses. The</span>
<span class=hljs-addition>+caching idea lead me to another one which was pre-calculating the solution of</span>
<span class=hljs-addition>+different areas and somehow figuring out which subareas make up a circle and</span>
<span class=hljs-addition>+combining them for the response. I do not know how to implement that if</span>
<span class=hljs-addition>+possible, though I think quad trees might provide guidance.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+Going back to the issue of many points, I started thinking of ways to cut down</span>
<span class=hljs-addition>+the candidate list from everything to less than everything. I then thought that</span>
<span class=hljs-addition>+by ordering the data it might be possible to stop considering candidates when</span>
<span class=hljs-addition>+one is outside the query as the rest would also be too far. For example, on a 1d</span>
<span class=hljs-addition>+space using points and line (segments) instead of points and circles, if the</span>
<span class=hljs-addition>+points are (an ordered) $-1, 3, 4, 5, 10, 100...$, and our line segment is</span>
<span class=hljs-addition>+centered around 4 with length 2 meaning it spans $[2, 6]$, then as we iterate</span>
<span class=hljs-addition>+through our ordered list, then once we see that $10$ is outside of $[2, 6]$, we</span>
<span class=hljs-addition>+no longer have to keep going. I did not think of how to order the points for</span>
<span class=hljs-addition>+this idea to apply to this problem, if possible.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+However, looking at the 1d idea, we can also use it to cut off earlier</span>
<span class=hljs-addition>+candidates, since we know it has to be at least 2. In fact, we know the entire</span>
<span class=hljs-addition>+solution is everything between $[2, 6]$ so if we grab that range from our</span>
<span class=hljs-addition>+ordered points then that&#x27;s the solution. We can extend this to the 2d space in</span>
<span class=hljs-addition>+the problem by doing this for the x and y dimensions - for a query with radius</span>
<span class=hljs-addition>+$(x, y, r)$ we can look at ranges $[x - r, x + r]$ and $[y - r, y + r]$ and</span>
<span class=hljs-addition>+using the intersection of those members for candidates. Conceptually this is</span>
<span class=hljs-addition>+drawing a square that bounds the circle and only picking points within them</span>
<span class=hljs-addition>+where things that fall in the corners will be filtered out through the normal</span>
<span class=hljs-addition>+process. The ranges can be found efficiently using b trees or range trees.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+I liked this idea, and thought it was reasonable. The one final idea I</span>
<span class=hljs-addition>+considered for the ordering points approach was to use polar coordinates for the</span>
<span class=hljs-addition>+points, since they already contain the radius though from the origin. I also</span>
<span class=hljs-addition>+could not think of any way to apply this.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+Like all interview questions, I&#x27;m always left with the question of whether this</span>
<span class=hljs-addition>+is the &quot;official&quot; solution or not. Fortunately, this appears to be a common</span>
<span class=hljs-addition>+interview question and various solutions are online, including bounding squares,</span>
<span class=hljs-addition>+bounding diamonds, and a k-d tree which I was unfamiliar with... oh it&#x27;s just</span>
<span class=hljs-addition>+another version of a tree that partitions space, so maybe it&#x27;s the proper</span>
<span class=hljs-addition>+version of the quad tree solution.</span>
</code></pre>
</details>
</div>
</div>
</div>
<picture id=very-cute-picture><img onerror='load_backup_image("/scripts/cozy_reimu.bmp"),load_backup_image("/scripts/unamused_reimu.bmp")' srcset=reimu>
</picture>
</body>
</html>
