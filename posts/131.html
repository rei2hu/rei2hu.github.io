
<!DOCTYPE html>
<html>
<head>
<meta charset=UTF-8>
<meta content="width=device-width,initial-scale=1" name=viewport>
<link href=/style/style.css rel=stylesheet>
<link href=/style/a11y.css rel=stylesheet>
<link href=/favicon.svg rel=icon type=image/svg+xml>
<script src=/scripts/image_loader.js></script>
<script src=/scripts/tex-mml-chtml.js defer></script>
<script>window.MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0}}</script>
<title>ai generated code in prod</title>
</head>
<body>
<nav class=site-nav id=nav>
<a href=/ >home</a>
<a href=/posts>posts</a>
<div id=lights-container>
<label title="toggle light/dark mode. only persistent with javascript">
<input id=lights type=checkbox>
lights
<script src=/scripts/lights.js></script>
</label>
</div>
</nav>
<div class=template-body>
<noscript class=noscript-warning>
Javascript is necessary for displaying LaTeX, some demos that run algorithms directly on the page, and small cosmetic features like light/dark mode.
</noscript>
<nav class=posts-nav_top>
<div class=posts-nav_before><a href=/./posts/130>&lt; i am a master</a></div> <div class=posts-nav_after><a href=/./posts/132>complaining about the next generation &gt;</a></div>
</nav>
<h1 id=ai-generated-code-in-prod>ai generated code in prod</h1>
<p>Recently, there was a bug where data was being labeled with a "cannot fetch information" message at the place where I work at. No one was sure if this was an issue on our end or another company's end because we were fetching information from an external api and tacking that information on.</p>
<p>It was assigned to one person previously, who found out that the message came from our code and said it's because the external api may not return some specific pieces of information under certain cases (e.g. nullable or optional fields) so that message pops up, but did no further investigation.</p>
<p>I ended up picking this task up and continued the work by pulling credentials from the database, manually making calls to the external api, and looking at the response - alright, the fields don't exist (as expected because that's why the code followed that specific path).</p>
<p>I then looked up the official documentation for the external api that describes the possible fields in the response for the specific endpoint we're working with and found out that the fields our code was looking for were not mentioned in the documentation but were instead nested elsewhere in the response. Perhaps they made a kind of breaking change and (re)moved the fields we were previously looking at?</p>
<p>The official documentation actually included a relatively comprehensive section about versioning and supposed guarantees about keeping backwards compatibility which included the mention of not removing any fields unless there was a major version change; their versioning followed semver (semantic versioning) and was still on 0.x.y, so it seemed impossible that the major version could have ever changed.</p>
<p>Finally, I looked at the blame for the classes in our code that described the response objects, and found the original pull request that introduced them. One year ago, the dev that made those classes left a comment on how the classes were generated by copilot by feeding the official documentation into it and was a great time-save. Right, it saved time and generated inaccurate code. To be honest, the classes are like 400 lines of simple property only classes so it would've been "boring" to write. And it actually also had the correct fields too; it's just that the code ended up looking at the incorrect ones. e.g.</p>
<pre class=code-block><input id=code-block-131-1 type=checkbox><label for=code-block-131-1></label><code>{
    <span class=hljs-comment>// foo, bar are the real fields</span>
    <span class=hljs-attr>foo</span>: <span class=hljs-number>1</span>,
    <span class=hljs-attr>bar</span>: <span class=hljs-number>1</span>,
    <span class=hljs-attr>vars</span>: {
        <span class=hljs-comment>// foo, bar are made up</span>
        <span class=hljs-attr>foo</span>: <span class=hljs-number>1</span>,
        <span class=hljs-attr>bar</span>: <span class=hljs-number>1</span>,
        <span class=hljs-attr>baz</span>: <span class=hljs-number>1</span>,
    },
    <span class=hljs-comment>// a ton more properties...</span>
}
</code></pre>
<p>Once I made the fix, the original author messaged me privately about the generated classes AND the original part of the code; what we discussed really made me think that they had minimal handle on what they actually wrote, and that the classes weren't the only thing AI generated (the other code was good, though).</p>
<p>Anyways, coming across something like that is what really makes me lose faith in professional software engineers. Why?</p>
<ol>
<li><p>AI was used and the output was not checked thoroughly. AI was used for a simple case, got things wrong, and it wasn't caught by the original dev nor the two reviewers (though, as a reviewer but not one of the two reviewers on the introductory pull request, I would not have verified the entire classes in depth with the official documentation because that's basically doing the actual workâ€¦) And, to be frank, the made up fields were in a plausible place in the response.</p></li>
<li><p>Code that never worked was deployed to prod. Sometimes it's hard to check if a feature works before deploying to prod, but this was not one of those times; there was enough test data in the development environment, and the company that provided the api also provided a sandbox environment to aid with testing things on their side.</p></li>
</ol>
<p>In general, I think the bar for technical skill/craftsmanship is a lot lower in the professional world (after the interview, of course). Obviously everyone has different bars so opinions may vary, but mine definitely include making sure the code you write (or generate with AI) works.</p>
<p>Though I haven't used AI generated code in either professional or hobby development yet.</p>
<nav class=posts-nav_bottom>
<div class=posts-nav_before><a href=/./posts/130>&lt; i am a master</a></div> <div class=posts-nav_after><a href=/./posts/132>complaining about the next generation &gt;</a></div>
</nav>
<div class=commit-container>
<div class="commit-list de-emphasized">
<span>History:</span>
<details>
<summary>2025-04-27 - update post 31: add more detail</summary>
<pre class=code-block><input id=code-block-8544179205bcd733fb2728ddf73632687f092093-1 type=checkbox><label for=code-block-8544179205bcd733fb2728ddf73632687f092093-1></label><code><span class=hljs-meta>@@ -20,4 +20,5 @@</span> the possible fields in the response for the specific endpoint we&#x27;re working with
 and found out that the fields our code was looking for were not mentioned in the
<span class=hljs-deletion>-documentation. Perhaps they made a kind of breaking change and removed the</span>
<span class=hljs-deletion>-fields we were previously looking at?</span>
<span class=hljs-addition>+documentation but were instead nested elsewhere in the response. Perhaps they</span>
<span class=hljs-addition>+made a kind of breaking change and (re)moved the fields we were previously</span>
<span class=hljs-addition>+looking at?</span>
</code></pre>
<pre class=code-block><input id=code-block-8544179205bcd733fb2728ddf73632687f092093-2 type=checkbox><label for=code-block-8544179205bcd733fb2728ddf73632687f092093-2></label><code><span class=hljs-meta>@@ -35,4 +36,26 @@</span> generated by copilot by feeding the official documentation into it and was a
 great time-save. Right, it saved time and generated inaccurate code. To be
<span class=hljs-deletion>-frank, the classes are like 400 lines of simple property only classes so it</span>
<span class=hljs-deletion>-would&#x27;ve been &quot;boring&quot; to write.</span>
<span class=hljs-addition>+honest, the classes are like 400 lines of simple property only classes so it</span>
<span class=hljs-addition>+would&#x27;ve been &quot;boring&quot; to write. And it actually also had the correct fields</span>
<span class=hljs-addition>+too; it&#x27;s just that the code ended up looking at the incorrect ones. e.g.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+```js</span>
<span class=hljs-addition>+{</span>
<span class=hljs-addition>+    // foo, bar are the real fields</span>
<span class=hljs-addition>+    foo: 1,</span>
<span class=hljs-addition>+    bar: 1,</span>
<span class=hljs-addition>+    vars: {</span>
<span class=hljs-addition>+        // foo, bar are made up</span>
<span class=hljs-addition>+        foo: 1,</span>
<span class=hljs-addition>+        bar: 1,</span>
<span class=hljs-addition>+        baz: 1,</span>
<span class=hljs-addition>+    },</span>
<span class=hljs-addition>+    // a ton more properties...</span>
<span class=hljs-addition>+}</span>
<span class=hljs-addition>+```</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+Once I made the fix, the original author messaged me privately about the</span>
<span class=hljs-addition>+generated classes AND the original part of the code; what we discussed really</span>
<span class=hljs-addition>+made me think that they had minimal handle on what they actually wrote, and that</span>
<span class=hljs-addition>+the classes weren&#x27;t the only thing AI generated (the other code was good,</span>
<span class=hljs-addition>+though).</span>
</code></pre>
<pre class=code-block><input id=code-block-8544179205bcd733fb2728ddf73632687f092093-3 type=checkbox><label for=code-block-8544179205bcd733fb2728ddf73632687f092093-3></label><code><span class=hljs-meta>@@ -46,3 +69,4 @@</span> professional software engineers. Why?
    in depth with the official documentation because that&#x27;s basically doing the
<span class=hljs-deletion>-   actual work...)</span>
<span class=hljs-addition>+   actual work...) And, to be frank, the made up fields were in a plausible</span>
<span class=hljs-addition>+   place in the response.</span>
</code></pre>
</details>
<details>
<summary>2025-04-27 - add post 131</summary>
<pre class=code-block><input id=code-block-a2a02bf7668779faf2681dc578ac22ecb1d38730-1 type=checkbox><label for=code-block-a2a02bf7668779faf2681dc578ac22ecb1d38730-1></label><code><span class=hljs-meta>@@ -0,0 +1,61 @@</span>
<span class=hljs-addition>+# ai generated code in prod</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+Recently, there was a bug where data was being labeled with a &quot;cannot fetch</span>
<span class=hljs-addition>+information&quot; message at the place where I work at. No one was sure if this was</span>
<span class=hljs-addition>+an issue on our end or another company&#x27;s end because we were fetching</span>
<span class=hljs-addition>+information from an external api and tacking that information on.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+It was assigned to one person previously, who found out that the message came</span>
<span class=hljs-addition>+from our code and said it&#x27;s because the external api may not return some</span>
<span class=hljs-addition>+specific pieces of information under certain cases (e.g. nullable or optional</span>
<span class=hljs-addition>+fields) so that message pops up, but did no further investigation.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+I ended up picking this task up and continued the work by pulling credentials</span>
<span class=hljs-addition>+from the database, manually making calls to the external api, and looking at the</span>
<span class=hljs-addition>+response - alright, the fields don&#x27;t exist (as expected because that&#x27;s why the</span>
<span class=hljs-addition>+code followed that specific path).</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+I then looked up the official documentation for the external api that describes</span>
<span class=hljs-addition>+the possible fields in the response for the specific endpoint we&#x27;re working with</span>
<span class=hljs-addition>+and found out that the fields our code was looking for were not mentioned in the</span>
<span class=hljs-addition>+documentation. Perhaps they made a kind of breaking change and removed the</span>
<span class=hljs-addition>+fields we were previously looking at?</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+The official documentation actually included a relatively comprehensive section</span>
<span class=hljs-addition>+about versioning and supposed guarantees about keeping backwards compatibility</span>
<span class=hljs-addition>+which included the mention of not removing any fields unless there was a major</span>
<span class=hljs-addition>+version change; their versioning followed semver (semantic versioning) and was</span>
<span class=hljs-addition>+still on 0.x.y, so it seemed impossible that the major version could have ever</span>
<span class=hljs-addition>+changed.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+Finally, I looked at the blame for the classes in our code that described the</span>
<span class=hljs-addition>+response objects, and found the original pull request that introduced them. One</span>
<span class=hljs-addition>+year ago, the dev that made those classes left a comment on how the classes were</span>
<span class=hljs-addition>+generated by copilot by feeding the official documentation into it and was a</span>
<span class=hljs-addition>+great time-save. Right, it saved time and generated inaccurate code. To be</span>
<span class=hljs-addition>+frank, the classes are like 400 lines of simple property only classes so it</span>
<span class=hljs-addition>+would&#x27;ve been &quot;boring&quot; to write.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+Anyways, coming across something like that is what really makes me lose faith in</span>
<span class=hljs-addition>+professional software engineers. Why?</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+1. AI was used and the output was not checked thoroughly. AI was used for a</span>
<span class=hljs-addition>+   simple case, got things wrong, and it wasn&#x27;t caught by the original dev nor</span>
<span class=hljs-addition>+   the two reviewers (though, as a reviewer but not one of the two reviewers on</span>
<span class=hljs-addition>+   the introductory pull request, I would not have verified the entire classes</span>
<span class=hljs-addition>+   in depth with the official documentation because that&#x27;s basically doing the</span>
<span class=hljs-addition>+   actual work...)</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+2. Code that never worked was deployed to prod. Sometimes it&#x27;s hard to check if</span>
<span class=hljs-addition>+   a feature works before deploying to prod, but this was not one of those</span>
<span class=hljs-addition>+   times; there was enough test data in the development environment, and the</span>
<span class=hljs-addition>+   company that provided the api also provided a sandbox environment to aid with</span>
<span class=hljs-addition>+   testing things on their side.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+In general, I think the bar for technical skill/craftsmanship is a lot lower in</span>
<span class=hljs-addition>+the professional world (after the interview, of course). Obviously everyone has</span>
<span class=hljs-addition>+different bars so opinions may vary, but mine definitely include making sure the</span>
<span class=hljs-addition>+code you write (or generate with AI) works.</span>
<span class=hljs-addition>+</span>
<span class=hljs-addition>+Though I haven&#x27;t used AI generated code in either professional or hobby</span>
<span class=hljs-addition>+development yet.</span>
</code></pre>
</details>
</div>
</div>
</div>
<picture id=very-cute-picture><img onerror='load_backup_image("/scripts/cozy_reimu.bmp"),load_backup_image("/scripts/unamused_reimu.bmp")' srcset=reimu>
</picture>
</body>
</html>
